/*! Copyright 2025 Adobe
All Rights Reserved. */
import{jsxs as l,jsx as r}from"@dropins/tools/preact-jsx-runtime.js";import{useState as t}from"@dropins/tools/preact-hooks.js";import{classes as m}from"@dropins/tools/lib.js";import{g as b}from"../chunks/login.js";/* empty css                 */import"@dropins/tools/fetch-graphql.js";const N=({className:u,children:c,...f})=>{const[a,y]=t(""),[n,_]=t(""),[s,h]=t({}),[p,g]=t(!1),[i,d]=t({type:null,message:""}),v=()=>{const e={},o=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;return a.trim()?o.test(a)||(e.email="Enter a valid email address."):e.email="Email is required.",n.trim()?n.length<6&&(e.password="Password must be at least 6 characters."):e.password="Password is required.",h(e),Object.keys(e).length===0},w=async e=>{if(e.preventDefault(),d({type:null,message:""}),!!v()){g(!0);try{const o=await b({email:a,password:n});d({type:"success",message:"You are signed in successfully."}),console.info("Customer token received:",o)}catch(o){d({type:"error",message:o instanceof Error?o.message:"The account sign-in was incorrect. Please try again."})}finally{g(!1)}}};return l("div",{...f,className:m(["my-custom-dropin-login-form",u]),children:[r("h2",{children:"Login to Your Account"}),r("p",{children:"Access exclusive offers and personalized experiences."}),l("form",{onSubmit:w,noValidate:!0,children:[l("div",{className:"my-custom-dropin-login-form__field",children:[r("input",{type:"email",placeholder:"Email Address",value:a,onInput:e=>y(e.target.value),"aria-invalid":!!s.email,"aria-describedby":"login-email-error",required:!0,className:m(["my-custom-dropin-login-form__input",s.email&&"my-custom-dropin-login-form__input--error"])}),s.email&&r("span",{id:"login-email-error",role:"alert",className:"my-custom-dropin-login-form__error",children:s.email})]}),l("div",{className:"my-custom-dropin-login-form__field",children:[r("input",{type:"password",placeholder:"Password",value:n,onInput:e=>_(e.target.value),"aria-invalid":!!s.password,"aria-describedby":"login-password-error",required:!0,className:m(["my-custom-dropin-login-form__input",s.password&&"my-custom-dropin-login-form__input--error"])}),s.password&&r("span",{id:"login-password-error",role:"alert",className:"my-custom-dropin-login-form__error",children:s.password})]}),r("button",{type:"submit",disabled:p,children:p?"Signing Inâ€¦":"Sign In"})]}),i.message&&r("p",{className:m(["my-custom-dropin-login-form__status",i.type==="error"&&"my-custom-dropin-login-form__status--error",i.type==="success"&&"my-custom-dropin-login-form__status--success"]),role:i.type==="error"?"alert":void 0,children:i.message}),c]})},q=({children:u,...c})=>r("div",{...c,children:r(N,{})});export{q as LoginContainer,q as default};
//# sourceMappingURL=LoginContainer.js.map
